<% include header.ejs %>
<% if (logs[0]) { %>
  <article id="userHeader">
    <section id="userHeaderInfo">
      <h2><%= user['display_name'] %></h2>
      <h3><%= user['bio'] %></h3>
      <img src="<%= user['logo'] %>"/>
    </section>
    <section>
      <h2>Statistics</h2>
      <p>
        Active in <b><%= channels.length %></b> channels <br>
        <!-- Has had <b>X</b> usernames: X, X, X <br> -->
        Sent <b><%= logs.length %></b> messages with an average of <b><%= logs.length / channels.length %></b> messages per streamer <br>
        Modded in <b><%= (1 / channels.length) * 100 %>%</b> of the active recorded channels (X/<%= channels.length %>)
    </section>
    <section>
      <h2>Actions</h2>
      <p>
        <a href="/streamer/<%= user['_id'] %>"<button>Full channel logs</button></a>
    </section>
  </article>
  <hr>
  <% for (var c in channels) { %>
    <section>
      <h1><%= channels[c].id %></h1>
      <% for (var e in logs) { %>
        <% if (logs[e].streamerId == channels[c].id) { %>
          <% if (logs[e].isMod) { %> <img src="https://static-cdn.jtvnw.net/chat-badges/mod.png" alt="Icon for Twitch subscriber"> <% } %>
          <% if (logs[e].isSub) { %> <img src="https://static-cdn.jtvnw.net/badges/v1/5d9f2208-5dd8-11e7-8513-2ff4adfae661/1" alt="Icon for Twitch moderator"> <% } %>
          <%= logs[e].date %> | <%= logs[e].userId %>: <%= logs[e].log %> <br>
        <% } %>
      <% } %>
    </section>
    <hr>
  <% } %>
  <% include footer.ejs %>
<% } else { %>
  <h1>Couldn't find a user with this username. Please try again.</h1>
<% } %>
